/**!
Â© 2019 Convergence Labs, Inc.
@version 0.4.0
@license MIT
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("monaco-editor")):"function"==typeof define&&define.amd?define("MonacoCollabExt",["vs/editor/editor.main"],e):"object"==typeof exports?exports.MonacoCollabExt=e(require("monaco-editor")):t.MonacoCollabExt=e(t.monaco)}(window,function(o){return s={},n.m=i=[function(t,e,o){"use strict";e.__esModule=!0;var i=(n.assertString=function(t,e){if("string"!=typeof t)throw new Error(e+" must be a string but was: "+t)},n.assertNumber=function(t,e){if("number"!=typeof t)throw new Error(e+" must be a number but was: "+t)},n.assertDefined=function(t,e){if(null==t)throw new Error(e+" must be a defined but was: "+t)},n.assertFunction=function(t,e){if("function"!=typeof t)throw new Error(e+" must be a function but was: "+typeof t)},n.assertPosition=function(t,e){if(n.assertDefined(t,e),"number"!=typeof t.lineNumber||"number"!=typeof t.column)throw new Error(e+" must be an Object like {lineNumber: number, column: number}: "+JSON.stringify(t))},n);function n(){}e.Validation=i},function(t,e){t.exports=o},function(t,e,o){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};e.__esModule=!0;var r=o(1),n=o(0),o=(s.prototype.insert=function(t,e){this._suppress=!0;var o=this._options,i=o.editor,o=o.remoteSourceId,t=i.getModel().getPositionAt(t);i.executeEdits(o,[{range:new r.Range(t.lineNumber,t.column,t.lineNumber,t.column),text:e,forceMoveMarkers:!0}]),this._suppress=!1},s.prototype.replace=function(t,e,o){this._suppress=!0;var i=this._options,n=i.editor,s=i.remoteSourceId,i=n.getModel().getPositionAt(t),e=n.getModel().getPositionAt(t+e);n.executeEdits(s,[{range:new r.Range(i.lineNumber,i.column,e.lineNumber,e.column),text:o,forceMoveMarkers:!0}]),this._suppress=!1},s.prototype.delete=function(t,e){this._suppress=!0;var o=this._options,i=o.editor,n=o.remoteSourceId,o=i.getModel().getPositionAt(t),e=i.getModel().getPositionAt(t+e);i.executeEdits(n,[{range:new r.Range(o.lineNumber,o.column,e.lineNumber,e.column),text:"",forceMoveMarkers:!0}]),this._suppress=!1},s.prototype.dispose=function(){this._disposer.dispose()},s.prototype._processChange=function(t){n.Validation.assertDefined(t,"change");var e=t.rangeOffset,o=t.rangeLength,i=t.text;if(0<i.length&&0===o)this._options.onInsert(e,i);else if(0<i.length&&0<o)this._options.onReplace(e,o,i);else{if(!(0===i.length&&0<o))throw new Error("Unexpected change: "+JSON.stringify(t));this._options.onDelete(e,o)}},s._DEFAULTS={onInsert:function(){},onReplace:function(){},onDelete:function(){},remoteSourceId:"remote"},s);function s(t){var e=this;this._onContentChanged=function(t){e._suppress||t.changes.forEach(function(t){return e._processChange(t)})},this._options=i(i({},s._DEFAULTS),t),n.Validation.assertDefined(this._options,"options"),n.Validation.assertDefined(this._options.editor,"options.editor"),n.Validation.assertFunction(this._options.onInsert,"options.onInsert"),n.Validation.assertFunction(this._options.onReplace,"options.onReplace"),n.Validation.assertFunction(this._options.onDelete,"options.onDelete"),this._disposer=this._options.editor.onDidChangeModelContent(this._onContentChanged)}e.EditorContentManager=o},function(t,o,e){"use strict";function i(t){for(var e in t)o.hasOwnProperty(e)||(o[e]=t[e])}o.__esModule=!0,i(e(4)),i(e(7)),i(e(2))},function(t,e,o){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};e.__esModule=!0;var r=o(5),u=o(6),d=o(0),o=(n.prototype.addCursor=function(t,e,o){var i=this;d.Validation.assertString(t,"id"),d.Validation.assertString(e,"color"),this._options.tooltips;var n=""+this._nextWidgetId++,s=1e3*this._options.tooltipDuration,s=new u.RemoteCursorWidget(this._options.editor,n,this._options.className,e,o,this._options.tooltips,s,this._options.showTooltipOnHover,this._options.tooltipClassName,function(){return i.removeCursor(t)});return this._cursorWidgets.set(t,s),new r.RemoteCursor(s)},n.prototype.removeCursor=function(t){d.Validation.assertString(t,"id");var e=this._getCursor(t);e.isDisposed()||e.dispose(),this._cursorWidgets.delete(t)},n.prototype.setCursorPosition=function(t,e){d.Validation.assertString(t,"id"),this._getCursor(t).setPosition(e)},n.prototype.setCursorOffset=function(t,e){d.Validation.assertString(t,"id"),this._getCursor(t).setOffset(e)},n.prototype.showCursor=function(t){d.Validation.assertString(t,"id"),this._getCursor(t).show()},n.prototype.hideCursor=function(t){d.Validation.assertString(t,"id"),this._getCursor(t).hide()},n.prototype._getCursor=function(t){if(!this._cursorWidgets.has(t))throw new Error("No such cursor: "+t);return this._cursorWidgets.get(t)},n.DEFAULT_OPTIONS={tooltips:!0,tooltipDuration:1,showTooltipOnHover:!1},n);function n(t){if("object"!=typeof t)throw new Error("'options' is a required parameter and must be an object.");if(void 0===(t=i(i({},n.DEFAULT_OPTIONS),t)).editor||null===t.editor)throw new Error("options.editor must be defined but was: "+t.editor);this._options=t,this._cursorWidgets=new Map,this._nextWidgetId=0}e.RemoteCursorManager=o},function(t,e,o){"use strict";e.__esModule=!0;var i=(n.prototype.getId=function(){return this._delegate.getId()},n.prototype.getPosition=function(){return this._delegate.getPosition().position},n.prototype.setPosition=function(t){this._delegate.setPosition(t)},n.prototype.setOffset=function(t){this._delegate.setOffset(t)},n.prototype.show=function(){this._delegate.show()},n.prototype.hide=function(){this._delegate.hide()},n.prototype.isDisposed=function(){return this._delegate.isDisposed()},n.prototype.dispose=function(){this._delegate.dispose()},n);function n(t){this._delegate=t}e.RemoteCursor=i},function(t,e,o){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};e.__esModule=!0;var a=o(1),c=o(2),n=o(0);s.prototype.hide=function(){this._domNode.style.display="none"},s.prototype.show=function(){this._domNode.style.display="inherit"},s.prototype.setOffset=function(t){n.Validation.assertNumber(t,"offset");t=this._editor.getModel().getPositionAt(t);this.setPosition(t)},s.prototype.setPosition=function(t){var e=this;n.Validation.assertPosition(t,"position"),this._updatePosition(t),null!==this._tooltipNode&&setTimeout(function(){return e._showTooltip()},0)},s.prototype.isDisposed=function(){return this._disposed},s.prototype.dispose=function(){this._disposed||(this._editor.removeContentWidget(this),null!==this._scrollListener&&this._scrollListener.dispose(),this._contentManager.dispose(),this._disposed=!0,this._onDisposed())},s.prototype.getId=function(){return this._id},s.prototype.getDomNode=function(){return this._domNode},s.prototype.getPosition=function(){return this._position},s.prototype._updatePosition=function(t){this._position={position:i({},t),preference:[a.editor.ContentWidgetPositionPreference.EXACT]},this._offset=this._editor.getModel().getOffsetAt(t),this._editor.layoutContentWidget(this)},s.prototype._showTooltip=function(){var t=this;this._setTooltipVisible(!0),this._hideTimer=setTimeout(function(){t._setTooltipVisible(!1)},this._tooltipDuration)},s.prototype._updateTooltipPosition=function(){this._domNode.offsetTop-this._editor.getScrollTop()-this._tooltipNode.offsetHeight<5?this._tooltipNode.style.top=this._tooltipNode.offsetHeight+2+"px":this._tooltipNode.style.top="-"+this._tooltipNode.offsetHeight+"px",this._tooltipNode.style.left="0"},s.prototype._setTooltipVisible=function(t){null!==this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null),t?(this._updateTooltipPosition(),this._tooltipNode.style.opacity="1.0"):this._tooltipNode.style.opacity="0"},o=s;function s(t,e,o,i,n,s,r,u,d,p){var l=this;this._onInsert=function(t,e){null===l._position||t<=(t=l._offset)&&(e=t+e.length,e=l._editor.getModel().getPositionAt(e),l._updatePosition(e))},this._onReplace=function(t,e,o){var i;null===l._position||t<=(i=l._offset)&&(o=i-Math.min(i-t,e)+o.length,o=l._editor.getModel().getPositionAt(o),l._updatePosition(o))},this._onDelete=function(t,e){var o;null===l._position||t<=(o=l._offset)&&(e=o-Math.min(o-t,e),e=l._editor.getModel().getPositionAt(e),l._updatePosition(e))},this._editor=t,this._tooltipDuration=r,this._id="monaco-remote-cursor-"+e,this._onDisposed=p;p=("function"==typeof(p=this._editor).getConfiguration?p.getConfiguration():{lineHeight:p.getOption(a.editor.EditorOption.lineHeight)}).lineHeight;this._domNode=document.createElement("div"),this._domNode.className=h("monaco-remote-cursor",o),this._domNode.style.background=i,this._domNode.style.height=p+"px",s?(this._tooltipNode=document.createElement("div"),this._tooltipNode.className=h("monaco-remote-cursor-tooltip",d),this._tooltipNode.style.background=i,this._tooltipNode.innerText=n,this._domNode.appendChild(this._tooltipNode),this._scrollListener=this._editor.onDidScrollChange(function(){l._updateTooltipPosition()}),u&&(this._domNode.style.pointerEvents="auto",this._domNode.addEventListener("mouseover",function(){l._setTooltipVisible(!0)}),this._domNode.addEventListener("mouseout",function(){l._setTooltipVisible(!1)}))):(this._tooltipNode=null,this._scrollListener=null),this._contentManager=new c.EditorContentManager({editor:this._editor,onInsert:this._onInsert,onReplace:this._onReplace,onDelete:this._onDelete}),this._hideTimer=null,this._editor.addContentWidget(this),this._offset=-1,this._disposed=!1}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(t){return null!=t&&0<t.length}).join(" ")}e.RemoteCursorWidget=o},function(t,e,o){"use strict";e.__esModule=!0;var n=o(8),i=o(0),o=(s.prototype.addSelection=function(t,e,o){var i=this,o=new n.RemoteSelection(this._options.editor,t,this._nextClassId++,e,o,function(){i.removeSelection(t)});return this._remoteSelections.set(t,o),o},s.prototype.removeSelection=function(t){t=this._getSelection(t);t.isDisposed()||t.dispose()},s.prototype.setSelectionOffsets=function(t,e,o){this._getSelection(t).setOffsets(e,o)},s.prototype.setSelectionPositions=function(t,e,o){this._getSelection(t).setPositions(e,o)},s.prototype.showSelection=function(t){this._getSelection(t).show()},s.prototype.hideSelection=function(t){this._getSelection(t).hide()},s.prototype._getSelection=function(t){if(!this._remoteSelections.has(t))throw new Error("No such selection: "+t);return this._remoteSelections.get(t)},s);function s(t){i.Validation.assertDefined(t,"options"),this._remoteSelections=new Map,this._options=t,this._nextClassId=0}e.RemoteSelectionManager=o},function(t,e,o){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};e.__esModule=!0;var n=o(1),s=o(0),o=(r._addDynamicStyleElement=function(t,e){s.Validation.assertString(t,"className"),s.Validation.assertString(e,"color");t=("."+t+" {\n         background-color: "+e+";\n       }").trim(),e=document.createElement("style");return e.innerText=t,document.head.appendChild(e),e},r._swapIfNeeded=function(t,e){return t.lineNumber<e.lineNumber||t.lineNumber===e.lineNumber&&t.column<=e.column?{start:t,end:e}:{start:e,end:t}},r.prototype.getId=function(){return this._id},r.prototype.getStartPosition=function(){return i({},this._startPosition)},r.prototype.getEndPosition=function(){return i({},this._endPosition)},r.prototype.setOffsets=function(t,e){t=this._editor.getModel().getPositionAt(t),e=this._editor.getModel().getPositionAt(e);this.setPositions(t,e)},r.prototype.setPositions=function(t,e){e=r._swapIfNeeded(t,e);this._startPosition=e.start,this._endPosition=e.end,this._render()},r.prototype.show=function(){this._render()},r.prototype.hide=function(){this._decorations=this._editor.deltaDecorations(this._decorations,[])},r.prototype.isDisposed=function(){return this._disposed},r.prototype.dispose=function(){this._disposed||(this._styleElement.parentElement.removeChild(this._styleElement),this.hide(),this._disposed=!0,this._onDisposed())},r.prototype._render=function(){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:new n.Range(this._startPosition.lineNumber,this._startPosition.column,this._endPosition.lineNumber,this._endPosition.column),options:{className:this._className,hoverMessage:null!=this._label?{value:this._label}:null}}])},r);function r(t,e,o,i,n,s){this._editor=t,this._id=e;o="monaco-remote-selection-"+o;this._className="monaco-remote-selection "+o,this._styleElement=r._addDynamicStyleElement(o,i),this._label=n,this._decorations=[],this._onDisposed=s}e.RemoteSelection=o}],n.c=s,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3);function n(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,s});
//# sourceMappingURL=monaco-collab-ext.min.js.map
